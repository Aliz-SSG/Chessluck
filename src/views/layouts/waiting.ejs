<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ('../partials/messages.ejs')-%>
  <meta charset="UTF-8" />
  <title>Chess Match Waiting</title>
  <style>
    /* Tailwind-inspired styles */
    body {
      margin: 0;
      background-color:#111827 ; /* gray-900 */
      font-family: system-ui, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
      color: white;
    }
    .container {
      max-width: 28rem; /* max-w-md */
      width: 100%;
      background-color: #1f2937; /* gray-800 */
      border-radius: 0.5rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -4px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
      box-sizing: border-box;
    }
    .text-center {
      text-align: center;
    }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-1_5 { margin-bottom: 0.375rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .shadow-xl { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1); }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
    .bg-gray-700 { background-color: #374151; }
    .bg-gray-700_50 { background-color: rgba(55, 65, 81, 0.5); }
    .bg-green-900_30 { background-color: rgba(4, 120, 87, 0.3); } /* green-900/30 */
    .bg-blue-900_30 { background-color: rgba(30, 58, 138, 0.3); } /* blue-900/30 */
    .border { border-style: solid; border-width: 1px; }
    .border-green-800 { border-color: #065f46; }
    .border-blue-800 { border-color: #1e40af; }
    .text-gray-300 { color: #d1d5db; }
    .text-gray-400 { color: #9ca3af; }
    .text-green-400 { color: #34d399; }
    .text-blue-400 { color: #60a5fa; }
    .text-white { color: white; }
    .bg-purple-600 { background-color: #7c3aed; }
    .bg-purple-700 { background-color: #6d28d9; }
    .rounded-full { border-radius: 9999px; }
    .h-2 { height: 0.5rem; }
    .w-full { width: 100%; }
    .flex { display: flex; }
    .flex-1 { flex: 1 1 0%; }
    .gap-3 { gap: 0.75rem; }
    .hover-bg-gray-600:hover { background-color: #4b5563; }
    .hover-bg-gray-700:hover { background-color: #4c1d95; }
    .transition-colors { transition: background-color 0.2s ease; }
    .transition-all { transition: all 1s ease; }
    .font-semibold { font-weight: 600; }
    .p-4 { padding: 1rem; }
    .p-6 { padding: 1.5rem; }

    /* Progress bar */
    .progress-bar {
      background-color: #a78bfa; /* purple-400 */
      height: 0.5rem;
      border-radius: 9999px;
      transition: width 1s ease;
      width: 100%; /* initial full width */
    }
    button {
      cursor: pointer;
      border: none;
      color: white;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
    }
    .btn-gray {
      background-color: #374151;
    }
    .btn-gray:hover {
      background-color: #4b5563;
    }
    .btn-purple {
      background-color: #7c3aed;
    }
    .btn-purple:hover {
      background-color: #6d28d9;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="text-center mb-6">
      <h1 class="text-2xl font-bold mb-2">Finding Opponent</h1>
      <p class="text-gray-400">Preparing your chess match</p>
    </div>

    

    <!-- Status -->
    <div class="text-center mb-6" id="status">
      <div class="bg-blue-900_30 border border-blue-800 rounded-lg p-4">
        <div class="text-blue-400 font-semibold">Searching for opponent...</div>
      </div>
    </div>

    <!-- Match Info -->

    <!-- Buttons -->
    <div class="flex gap-3 ">
      <button id="cancelBtn" class="btn-gray flex-1">Cancel</button>
      <!-- <button class="btn-purple flex-1">Ready</button> -->
    </div>
  </div>
    
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();

  // Register this user with server
  socket.emit("registerUser", "<%= userId %>");

  // If matched â†’ redirect instantly
  socket.on("goToDeckSelection", (data) => {
    window.location.href = `/game/${data.gameId}/deck-selection`;
  });
</script>

</html>
